<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mini Projet Vue.js</title>
  <script src="https://unpkg.com/vue@3.4.15/dist/vue.global.js"></script>
  <style>
    img {
      float: left;
      margin-right: 1rem;
      border-radius: 50%;
    }
    .personne {
      clear: left;
      padding: 1rem;
      margin-bottom: 1rem;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    input[type="checkbox"],
    select {
      margin-right: 1rem;
    }
    .misEnForme {
      background: #e0ffff;
      font-family: Georgia;
      font-size: 1.2rem;
      margin: 1rem;
    }
  </style>
</head>

<body>
  <div id="app">
    <fieldset>
      <legend>Filtre sur le nom</legend>
      <input type="text" v-model="filtreNom" placeholder="Nom à rechercher">
    </fieldset>
    <fieldset>
      <legend>Options</legend>
      Homme <input type="checkbox" v-model="homme">
      Femme <input type="checkbox" v-model="femme">
      Téléphone <input type="checkbox" v-model="tel">
      Photo
      <select v-model="taille">
        <option value="1">Petit</option>
        <option value="2">Moyen</option>
        <option value="3">Grand</option>
      </select>
      Mise en forme <input type="checkbox" v-model="mef">
    </fieldset>
    <div
      v-for="p in personnesFiltrees"
      :key="p.login.uuid"
      :class="['personne', { misEnForme: mef }]"
    >
      <div>
        <img v-if="taille == 1" :src="p.picture.thumbnail" alt="photo petite">
        <img v-else-if="taille == 2" :src="p.picture.medium" alt="photo moyenne">
        <img v-else :src="p.picture.large" alt="photo grande">
        {{ p.name.title }} {{ p.name.first }} {{ p.name.last }}<br>
        <div v-if="tel">{{ p.phone }}</div>
        <div>{{ p.location.country }}</div>
      </div>
    </div>
  </div>

  <script>
    const { createApp } = Vue;

    createApp({
      data() {
        return {
          homme: true,
          femme: true,
          tel: true,
          mef: false,
          taille: 2,
          filtreNom: '',
          personnes: [
            {
              "gender": "female",
              "name": { "title": "Mrs", "first": "Elizabeth", "last": "Ambrose" },
              "location": { "country": "Canada" },
              "phone": "366-033-8063",
              "picture": {
                "large": "https://randomuser.me/api/portraits/women/49.jpg",
                "medium": "https://randomuser.me/api/portraits/med/women/49.jpg",
                "thumbnail": "https://randomuser.me/api/portraits/thumb/women/49.jpg"
              },
              "login": { "uuid": "1" }
            },
            {
              "gender": "male",
              "name": { "title": "Mr", "first": "Batista", "last": "Silveira" },
              "location": { "country": "Brazil" },
              "phone": "(53) 5553-2892",
              "picture": {
                "large": "https://randomuser.me/api/portraits/men/50.jpg",
                "medium": "https://randomuser.me/api/portraits/med/men/50.jpg",
                "thumbnail": "https://randomuser.me/api/portraits/thumb/men/50.jpg"
              },
              "login": { "uuid": "2" }
            },
            {
              "gender": "male",
              "name": { "title": "Mr", "first": "Blaise", "last": "Adam" },
              "location": { "country": "Switzerland" },
              "phone": "079 493 00 77",
              "picture": {
                "large": "https://randomuser.me/api/portraits/men/29.jpg",
                "medium": "https://randomuser.me/api/portraits/med/men/29.jpg",
                "thumbnail": "https://randomuser.me/api/portraits/thumb/men/29.jpg"
              },
              "login": { "uuid": "3" }
            }
          ]
        };
      },
      computed: {
        personnesFiltrees() {
          return this.personnes.filter(p => {
            const estHomme = p.gender === 'male';
            const estFemme = p.gender === 'female';
            const correspondGenre = (this.homme && estHomme) || (this.femme && estFemme);
            const correspondNom = p.name.last.toLowerCase().includes(this.filtreNom.toLowerCase());
            return correspondGenre && correspondNom;
          });
        }
      }
    }).mount("#app");
  </script>
</body>
</html>
